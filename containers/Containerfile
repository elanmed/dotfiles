FROM fedora:41

RUN dnf install -y git ruby zsh stow cargo fd-find which && \
    dnf clean all

ENV SHELL=/usr/bin/zsh PATH="/root/.cargo/bin:${PATH}"

RUN git clone https://github.com/elanmed/dotfiles ~/.dotfiles && \
    cd ~/.dotfiles && \
    sed -i 's|git@github.com:|https://github.com/|g' .gitmodules && \
    git submodule init && \
    git submodule update

RUN cd ~/.dotfiles && ruby bootstrap.rb --package-manager=dnf --server

WORKDIR /workspace
